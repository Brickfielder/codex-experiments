---
import BaseLayout from '../layouts/BaseLayout.astro';
import papers from '../../data/papers.normalized.json';
import type { Paper } from '~/utils/types';
const typedPapers = papers as Paper[];
const featured = typedPapers.slice(0, 3);
---

<BaseLayout
  title="OHCA Survivorship Repository"
  description="Evidence summaries for life after cardiac arrest"
>
  <section class="mx-auto flex max-w-6xl flex-col gap-10 py-12">
    <div class="grid gap-8 lg:grid-cols-2 lg:items-center">
      <div class="space-y-6">
        <h1 class="text-3xl font-bold tracking-tight sm:text-4xl">
          Out-of-hospital cardiac arrest survivorship knowledge hub
        </h1>
        <p class="text-lg text-slate-600 dark:text-slate-300">
          Curated literature on cognition, psychological health, quality of life, participation, and
          caregiver experiences after cardiac arrest. Search, filter, and explore the evidence base
          to support multidisciplinary care.
        </p>
        <div class="flex flex-wrap gap-3">
          <a class="btn-primary" href="/browse">Browse the repository</a>
          <a class="btn-secondary" href="/about">Learn about the project</a>
        </div>
      </div>
      <div
        class="rounded-2xl border border-slate-200 bg-white p-6 shadow-xl dark:border-slate-800 dark:bg-slate-900"
      >
        <h2 class="text-lg font-semibold">Key themes we cover</h2>
        <ul class="mt-4 grid gap-3 text-sm text-slate-600 dark:text-slate-300">
          <li class="flex items-start gap-2">
            <span class="mt-1 h-2 w-2 rounded-full bg-blue-500" aria-hidden="true"></span>
            Cognitive screening, neuropsychology, and rehabilitation
          </li>
          <li class="flex items-start gap-2">
            <span class="mt-1 h-2 w-2 rounded-full bg-purple-500" aria-hidden="true"></span>
            Emotional recovery, fatigue, and psychological well-being
          </li>
          <li class="flex items-start gap-2">
            <span class="mt-1 h-2 w-2 rounded-full bg-emerald-500" aria-hidden="true"></span>
            Participation, return-to-work, and quality of life
          </li>
          <li class="flex items-start gap-2">
            <span class="mt-1 h-2 w-2 rounded-full bg-amber-500" aria-hidden="true"></span>
            Caregiver support and shared decision making
          </li>
        </ul>
      </div>
    </div>

    <div>
      <h2 class="text-2xl font-semibold">Recently added</h2>
      <div class="mt-4 grid gap-4 md:grid-cols-2">
        {
          featured.map((paper) => (
            <article class="card" key={paper.id}>
              <h3 class="text-lg font-semibold text-blue-700 dark:text-blue-300">
                <a href={`/paper/${paper.id}`}>{paper.title}</a>
              </h3>
              <p class="mt-2 text-sm text-slate-600 dark:text-slate-300">
                {paper.normalizedAuthors.slice(0, 3).join(', ')} et al.
              </p>
              <p class="mt-2 text-sm text-slate-600 dark:text-slate-300">
                {paper.journal} â€¢ {paper.year}
              </p>
              <div class="mt-3 flex flex-wrap gap-2">
                {(paper.domains ?? []).slice(0, 3).map((domain) => (
                  <span class="badge" key={domain}>
                    {domain}
                  </span>
                ))}
              </div>
            </article>
          ))
        }
      </div>
    </div>
  </section>
</BaseLayout>
