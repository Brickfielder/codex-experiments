---
import BaseLayout from '../layouts/BaseLayout.astro';
import { getBrowseUrl } from '~/utils/siteUrls';
import HeroCard from '~/components/HeroCard';
import { h } from 'preact';
const browseHref = getBrowseUrl();
const aboutPrimaryCta = h(
  'a',
  {
    class:
      'inline-flex items-center gap-2 rounded-xl bg-indigo-600 px-5 py-2.5 text-sm font-semibold text-white shadow-lg transition hover:-translate-y-0.5 hover:bg-indigo-500 hover:shadow-xl',
    href: browseHref
  },
  'Explore the papers'
);
const aboutSecondaryCta = h(
  'a',
  {
    class:
      'inline-flex items-center gap-2 rounded-xl border border-slate-200 bg-white px-5 py-2.5 text-sm font-semibold text-slate-700 transition hover:-translate-y-0.5 hover:border-indigo-200 hover:text-indigo-700 dark:border-slate-700 dark:bg-slate-900 dark:text-slate-50',
    href: 'mailto:info@ohca-repo.org'
  },
  'Contact the team'
);
---

<BaseLayout
  title="About"
  description="Background and update cadence for the OHCA Survivorship Repository"
>
  <section class="space-y-12 px-4 py-12 sm:px-6 lg:px-8">
    <HeroCard
      eyebrow="Our purpose & process"
      title="About the cardiac arrest survivorship repository"
      subtitle="The repository organizes peer-reviewed research on life after out-of-hospital cardiac arrest, highlighting cognition, psychological health, quality of life, participation, and caregiver-focused work. Each paper is reviewed for relevance, tagged with a shared schema, and linked to external sources to help clinicians, researchers, and survivor partners act on the evidence."
      primaryCta={aboutPrimaryCta}
      secondaryCta={aboutSecondaryCta}
      variant="surface"
    />

    <section class="grid gap-6 md:grid-cols-2">
      <div
        id="search-strategy"
        class="rounded-3xl border border-white/70 bg-white/90 p-6 shadow-xl ring-1 ring-indigo-100 backdrop-blur md:col-span-2"
      >
        <h2 class="text-xl font-semibold text-slate-900">How we identified relevant papers</h2>
        <div class="mt-4 space-y-4 text-sm leading-relaxed text-slate-600">
          <div class="space-y-2">
            <h4 class="text-base font-semibold text-slate-900">Identification</h4>
            <p>
              A tailored search strategy—published in full for transparency and replicability—was applied to each database
              (PubMed, CINAHL, and Web of Science). Together, these searches returned a large pool of records spanning
              medical, nursing, psychological, and rehabilitation sciences. For each record, titles and abstracts were
              retrieved, except in cases where the abstract was unavailable in the source database.
            </p>
            <p>
              You can access the full search strategy here:
              <a
                class="text-indigo-600 underline decoration-dotted underline-offset-2"
                href="/path/to/search-strategy.pdf"
                target="_blank"
                rel="noreferrer"
              >
                detailed search strategy (replicable)
              </a>
              .
            </p>
          </div>

          <div class="space-y-2">
            <h4 class="text-base font-semibold text-slate-900">Deduplication</h4>
            <p>
              All records were merged into a single dataset. Using a custom Python-based deduplication script, duplicate
              entries were identified and removed through a combination of DOI matching, fuzzy title comparison, and
              metadata harmonisation. The deduplicated set represented the total pool of unique publications eligible for
              initial screening.
            </p>
            <p>
              The deduplication script is available here:
              <a
                class="text-indigo-600 underline decoration-dotted underline-offset-2"
                href="/path/to/deduplication-script.py"
                target="_blank"
                rel="noreferrer"
              >
                deduplication Python script
              </a>
              .
            </p>
          </div>

          <div class="space-y-2">
            <h4 class="text-base font-semibold text-slate-900">Semantic prioritisation</h4>
            <p>
              To support efficient human review, abstracts were processed using a sentence-transformer semantic model
              (all-MiniLM-L6-v2). Each record received a semantic relevance score reflecting its conceptual proximity to the
              defined survivorship domain. Papers were then rank-ordered from most to least semantically aligned, but no
              automatic exclusions were made; this step was designed purely to structure workflow, not to determine
              eligibility.
            </p>
            <p>
              In practice, this semantic system tends to rank down studies focused exclusively on neuroprognostication,
              bystander interventions, survival-only registry analyses, or simulation/education studies, while prioritising
              work addressing cognitive, psychological, social, and quality-of-life outcomes.
            </p>
            <p>
              The semantic screening script is available here:
              <a
                class="text-indigo-600 underline decoration-dotted underline-offset-2"
                href="/path/to/semantic-screening-script.py"
                target="_blank"
                rel="noreferrer"
              >
                semantic screening Python script
              </a>
              .
            </p>
          </div>

          <div class="space-y-2">
            <h4 class="text-base font-semibold text-slate-900">Screening</h4>
            <p>
              Two independent reviewers manually screened every abstract one by one, starting from the highest-ranked
              records. Eligibility was determined based on predefined Population / Intervention / Outcomes (P/I/O) criteria
              specific to survivorship after cardiac arrest, covering cognitive, psychological, social, and quality-of-life
              domains. Where needed, full texts were consulted to clarify eligibility.
            </p>
          </div>

          <div class="space-y-2">
            <h4 class="text-base font-semibold text-slate-900">Inclusion</h4>
            <p>
              Studies meeting inclusion criteria were added to the Survivorship Repository, with metadata harmonised across
              all sources. Links to full texts (where available), DOIs, and abstracts were preserved to maximise
              accessibility. For methodological transparency, we provide the Python scripts used for deduplication and
              semantic scoring, along with the search strategy documents, so that other groups can replicate or adapt this
              workflow for their own contexts.
            </p>
          </div>
        </div>
      </div>
      <div
        class="rounded-3xl border border-white/70 bg-white/90 p-6 shadow-xl ring-1 ring-indigo-100 backdrop-blur"
      >
        <h2 class="text-xl font-semibold text-slate-900">How we curate</h2>
        <ul class="mt-4 space-y-3 text-sm leading-relaxed text-slate-600">
          <li class="flex gap-3">
            <span class="mt-1 inline-flex h-2 w-2 rounded-full bg-indigo-500"></span>
            Clinician-researchers screen new publications for relevance and methodological rigor.
          </li>
          <li class="flex gap-3">
            <span class="mt-1 inline-flex h-2 w-2 rounded-full bg-purple-500"></span>
            Each paper is normalized into a shared schema with consistent author formatting, domain tagging,
            and link validation.
          </li>
          <li class="flex gap-3">
            <span class="mt-1 inline-flex h-2 w-2 rounded-full bg-emerald-500"></span>
            Automated scripts enrich abstracts, identify related studies, and flag duplicate entries
            before publishing updates.
          </li>
        </ul>
      </div>
      <div
        class="rounded-3xl border border-white/70 bg-white/90 p-6 shadow-xl ring-1 ring-indigo-100 backdrop-blur"
      >
        <h2 class="text-xl font-semibold text-slate-900">Update cadence</h2>
        <p class="mt-4 text-sm leading-relaxed text-slate-600">
          We refresh the repository every other month, with ad-hoc releases for notable
          publications.
        </p>
        <p class="mt-3 text-sm leading-relaxed text-slate-600">
          To suggest papers or collaborate on tagging standards, please reach out via the contact
          link above.
        </p>
      </div>
    </section>

    <section
      class="rounded-3xl border border-white/70 bg-white/90 p-6 shadow-xl ring-1 ring-indigo-100 backdrop-blur"
    >
      <h2 class="text-xl font-semibold text-slate-900">Organization at a glance</h2>
      <div class="mt-4 grid gap-6 md:grid-cols-2">
        <div class="rounded-2xl bg-slate-50/80 p-4 shadow-inner">
          <h3 class="text-sm font-semibold uppercase tracking-[0.2em] text-slate-500">Domains</h3>
          <p class="mt-2 text-sm text-slate-600">
            Cognitive outcomes, psychological health, quality of life, participation and
            return-to-work, caregiver perspectives.
          </p>
        </div>
        <div class="rounded-2xl bg-slate-50/80 p-4 shadow-inner">
          <h3 class="text-sm font-semibold uppercase tracking-[0.2em] text-slate-500">Facets</h3>
          <p class="mt-2 text-sm text-slate-600">
            Filter by study design, setting, geography, journal, and publication year to find
            studies that match your question.
          </p>
        </div>
        <div class="rounded-2xl bg-slate-50/80 p-4 shadow-inner">
          <h3 class="text-sm font-semibold uppercase tracking-[0.2em] text-slate-500">
            Paper detail pages
          </h3>
          <p class="mt-2 text-sm text-slate-600">
            Export citations in APA, Vancouver, BibTeX, or RIS formats. Access PubMed, DOI, and PMC
            links when available.
          </p>
        </div>
        <div class="rounded-2xl bg-slate-50/80 p-4 shadow-inner">
          <h3 class="text-sm font-semibold uppercase tracking-[0.2em] text-slate-500">
            Related research
          </h3>
          <p class="mt-2 text-sm text-slate-600">
            Abstract similarity surfaces adjacent studies so you can continue exploring
            survivor-focused literature.
          </p>
        </div>
      </div>
    </section>
  </section>
</BaseLayout>
