---
import {
  getAboutUrl,
  getBrowseUrl,
  getCollaborateUrl,
  getHeatmapUrl,
  getSiteUrl
} from '~/utils/siteUrls';
import '../styles/global.css';
const {
  title = 'OHCA Survivorship Repository',
  description = 'Knowledge hub for survivorship after cardiac arrest'
} = Astro.props;
const homeHref = getSiteUrl();
const browseHref = getBrowseUrl();
const aboutHref = getAboutUrl();
const heatmapHref = getHeatmapUrl();
const privacyHref = getSiteUrl('privacy');
const collaborateHref = getCollaborateUrl();
---

<!doctype html>
<html lang="en" class="min-h-full">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{title}</title>
    <meta name="description" content={description} />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
  </head>
  <body
    class="min-h-screen bg-slate-50 text-slate-600 antialiased dark:bg-slate-950 dark:text-slate-100"
  >
    <a
      href="#main"
      class="sr-only focus:not-sr-only focus:absolute focus:left-4 focus:top-4 focus:rounded-md focus:bg-teal-600 focus:px-3 focus:py-2 focus:text-white"
    >
      Skip to content
    </a>
    <header class="relative isolate overflow-hidden bg-slate-900 text-white">
      <div class="absolute inset-0 bg-gradient-to-b from-slate-900 via-slate-900/95 to-slate-950">
      </div>
      <div
        class="absolute inset-0 opacity-20 bg-[radial-gradient(#2dd4bf_1px,transparent_1px)] bg-[size:40px_40px]"
      >
      </div>
      <nav class="relative border-b border-white/10">
        <div class="mx-auto flex h-16 max-w-7xl items-center justify-between px-6 lg:px-8">
          <a
            class="flex items-center gap-2 text-sm font-medium text-slate-200 transition hover:text-white"
            href={homeHref}
          >
            <span class="text-lg" aria-hidden="true">ðŸ’™</span>
            <span>Cardiac Arrest Research Hub</span>
          </a>
          <div class="flex items-center gap-4">
            <div
              class="hidden items-center gap-6 text-sm font-medium text-slate-200 md:flex"
              aria-label="Primary"
            >
              <a class="hover:text-white transition" href={browseHref}>Browse</a>
              <a class="hover:text-white transition" href={aboutHref}>About</a>
              <a class="hover:text-white transition" href={heatmapHref}>Heat Map</a>
              <a class="hover:text-white transition" href={collaborateHref}>Collaborate</a>
            </div>
            <button
              class="inline-flex items-center justify-center rounded-full border border-white/30 bg-white/10 p-2 text-white shadow-inner transition hover:border-teal-200 md:hidden"
              type="button"
              aria-label="Toggle navigation"
              data-mobile-nav
            >
              <svg
                aria-hidden="true"
                class="h-5 w-5"
                fill="none"
                stroke="currentColor"
                stroke-width="1.8"
                viewBox="0 0 24 24"
              >
                <path stroke-linecap="round" stroke-linejoin="round" d="M4 7h16M4 12h16M4 17h16"
                ></path>
              </svg>
            </button>
          </div>
        </div>
      </nav>
      <nav
        class="relative hidden flex-col gap-3 border-b border-white/10 bg-slate-900/90 px-6 pb-5 pt-4 text-sm font-semibold text-white shadow-lg backdrop-blur lg:px-8 md:hidden"
        aria-label="Mobile"
        data-mobile-panel
      >
        <div class="grid grid-cols-1 gap-3">
          <a
            class="w-full rounded-2xl border border-white/15 bg-white/10 px-5 py-3 text-left shadow-sm transition hover:-translate-y-0.5 hover:border-white/30 hover:bg-white/20"
            href={browseHref}>Browse</a
          >
          <a
            class="w-full rounded-2xl border border-white/15 bg-white/10 px-5 py-3 text-left shadow-sm transition hover:-translate-y-0.5 hover:border-white/30 hover:bg-white/20"
            href={aboutHref}>About</a
          >
          <a
            class="w-full rounded-2xl border border-white/15 bg-white/10 px-5 py-3 text-left shadow-sm transition hover:-translate-y-0.5 hover:border-white/30 hover:bg-white/20"
            href={heatmapHref}>Heat Map</a
          >
          <a
            class="w-full rounded-2xl border border-white/15 bg-white/10 px-5 py-3 text-left shadow-sm transition hover:-translate-y-0.5 hover:border-white/30 hover:bg-white/20"
            href={collaborateHref}>Collaborate</a
          >
        </div>
      </nav>
      {
        Astro.slots.has('hero') ? (
          <div class="relative mx-auto max-w-5xl px-6 pb-20 pt-16 text-center lg:px-8">
            <slot name="hero" />
          </div>
        ) : (
          <div class="relative py-10" />
        )
      }
    </header>
    <main id="main" class="bg-slate-50 text-slate-600 dark:bg-slate-950 dark:text-slate-100">
      <slot />
    </main>
    <footer
      class="border-t border-slate-200 bg-white py-12 dark:border-slate-800 dark:bg-slate-900"
    >
      <div class="mx-auto max-w-7xl px-6 text-center lg:px-8">
        <div class="text-2xl mb-4">ðŸ’™</div>
        <p class="text-sm text-slate-500 dark:text-slate-300">
          Â© {new Date().getFullYear()} OHCA Survivorship Repository. Built for open science.
        </p>
        <div
          class="mt-6 flex justify-center gap-6 text-sm font-medium text-slate-600 dark:text-slate-200"
        >
          <a class="transition hover:text-teal-600" href={aboutHref}>About</a>
          <a class="transition hover:text-teal-600" href={collaborateHref}>Contact</a>
          <a class="transition hover:text-teal-600" href={privacyHref}>Privacy</a>
        </div>
      </div>
    </footer>
    <script is:inline>
      const mobileToggle = document.querySelector('[data-mobile-nav]');
      const mobilePanel = document.querySelector('[data-mobile-panel]');
      mobileToggle?.addEventListener('click', () => {
        mobilePanel?.classList.toggle('hidden');
        const expanded = mobileToggle.getAttribute('aria-expanded') === 'true';
        mobileToggle.setAttribute('aria-expanded', expanded ? 'false' : 'true');
      });
    </script>
  </body>
</html>
