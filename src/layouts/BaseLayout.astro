---
import ThemeToggle from '../components/ThemeToggle.astro';
import { resolveWithBase } from '~/utils/paths';
import { getAboutUrl, getBrowseUrl } from '~/utils/siteUrls';
import '../styles/global.css';
const {
  title = 'OHCA Survivorship Repository',
  description = 'Knowledge hub for survivorship after cardiac arrest'
} = Astro.props;
const homeHref = resolveWithBase('/');
const browseHref = getBrowseUrl();
const aboutHref = getAboutUrl();
const rssHref = resolveWithBase('/feed.xml');
const jsonFeedHref = resolveWithBase('/feed.json');
const apiHref = resolveWithBase('/api/papers.json');
---

<!doctype html>
<html lang="en" class="min-h-full">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{title}</title>
    <meta name="description" content={description} />
  </head>
  <body class="min-h-screen bg-white dark:bg-slate-950">
    <a
      href="#main"
      class="sr-only focus:not-sr-only focus:absolute focus:left-4 focus:top-4 focus:rounded-md focus:bg-blue-600 focus:px-3 focus:py-2 focus:text-white"
    >
      Skip to content
    </a>
    <header
      class="border-b border-slate-200 bg-white/80 backdrop-blur dark:border-slate-800 dark:bg-slate-950/80"
    >
      <div class="mx-auto flex max-w-6xl items-center justify-between px-4 py-4 sm:px-6 lg:px-8">
        <a class="text-lg font-semibold" href={homeHref}>OHCA Survivorship Repository</a>
        <nav class="hidden gap-6 text-sm font-medium sm:flex" aria-label="Primary">
          <a href={browseHref}>Browse</a>
          <a href={aboutHref}>About</a>
        </nav>
        <div class="flex items-center gap-3">
          <ThemeToggle />
        </div>
      </div>
    </header>
    <nav
      class="border-b border-slate-200 bg-white px-4 py-3 text-sm font-medium text-slate-700 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-200 sm:hidden"
      aria-label="Mobile"
    >
      <div class="mx-auto flex max-w-6xl gap-4">
        <a href={browseHref}>Browse</a>
        <a href={aboutHref}>About</a>
      </div>
    </nav>
    <main id="main">
      <slot />
    </main>
    <footer
      class="border-t border-slate-200 bg-white py-8 text-sm text-slate-600 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-400"
    >
      <div
        class="mx-auto flex max-w-6xl flex-col items-center justify-between gap-4 px-4 sm:flex-row sm:px-6 lg:px-8"
      >
        <p>&copy; {new Date().getFullYear()} OHCA Survivorship Repository</p>
        <div class="flex gap-4">
          <a href={rssHref}>RSS</a>
          <a href={jsonFeedHref}>JSON Feed</a>
          <a href={apiHref}>API</a>
        </div>
      </div>
    </footer>
  </body>
</html>
